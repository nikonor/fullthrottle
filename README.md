# fullthrottle

Библиотека реализует неблокирующую задержку. Т.е. time.Sleep, который можно прервать. 

Основная функция возвращает канал, сообщение в котором появится после заданного через объект периода ожидания. Если в канале будет true, то это означает, что работу можно заканчивать. Такое может произойти потому что превышено кол-во попыток (MaxCount), либо пришла команда на завершение через DoneChan


- DoneChan     chan struct{} - ОБЯЗАТЕЛЬНЫЙ. Канал, который может прекрастить выполнение задержки. Если его закрыть, то в канал, который возвращает основная функция, верется true 
- BeginDelay   time.Duration - Начальная задержка
- MaxDelay     time.Duration - Максимальная задержка
- IncDelay     time.Duration - Сколько добавить (сложение) после каждой неудачной попытки 
- MultDelay    time.Duration - На сколько увеличить (умножение) после каждой неудачной попытки
- MaxCount     int64 - Максимальное кол-во потыток. Когда оно будет превышено, то в канал, который возвращает основная функция, верется true
- NextDelay    func(Throttling) time.Duration - Функция для расчета следующей задержки 


## Примеры

Создаем правила для работы библиотеки. Начальная задержка будет 2 секунды, она не будет меняться. Функция doSomething будет выполнена не более 2 раз. Если она будет возвращаться ошибку.

```go
	tr := Throttling{MaxCount: 2, DoneChan: doneChane, BeginDelay: 2 * time.Second}
	for {
		if err := doSomething(last, 2); err == nil {
			break
		}
		if <-tr.Throttling() {
			return
		}
	}
```
